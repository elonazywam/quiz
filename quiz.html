<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Wybierz Kategoriƒô</title>
    <style>
        /* CSS: Stylizowanie strony */
        body {
            font-family: Arial, sans-serif;
            background-color: #2c3e50; /* Domy≈õlne CIEMNE T≈ÅO */
            
            /* --- STYL T≈ÅA Z TWOIM OBRAZEM 'obraz.png' --- */
            background-image: url('obraz.png'); 
            background-size: cover; /* Pokrywa ca≈ÇƒÖ stronƒô, ale jest zachowany aspekt obrazu */
            background-position: center center;
            background-attachment: fixed; 
            background-repeat: no-repeat;
            /* -------------------------------- */
            
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0; i
            color: #ecf0f1; 
            position: relative;
        }
        
        /* Dodatkowa warstwa ciemno≈õci dla lepszej czytelno≈õci tekstu na zdjƒôciu */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6); /* Zwiƒôkszono p√≥≈Çprzezroczysto≈õƒá dla czytelno≈õci */
            z-index: -1;
        }

        .quiz-container {
            background-color: rgba(52, 73, 94, 0.9); /* P√ì≈ÅPRZEZROCZYSTE T≈ÅO DLA KONTENERA */
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.9);
            width: 90%;
            max-width: 800px; 
            text-align: center;
            z-index: 1; 
        }
        h1 {
            color: #f1c40f; 
            margin-bottom: 20px;
        }
        
        .logo {
            width: 120px;
            height: 120px;
            margin: 20px auto;
            object-fit: contain;
        }
        
        /* ZMIANA UK≈ÅADU MENU */
        .main-nav {
            margin-bottom: 25px;
            border-bottom: 1px solid #bdc3c7;
            padding-bottom: 10px;
            display: flex; 
            justify-content: center; 
        }
        .main-nav button {
            background: none;
            border: none;
            padding: 10px 15px;
            margin: 0 15px; 
            font-size: 16px;
            cursor: pointer;
            color: #bdc3c7; 
            transition: color 0.2s;
            text-transform: uppercase;
            font-weight: bold;
        }
        .main-nav button:hover {
            color: #ecf0f1;
            border-bottom: 2px solid #f1c40f; 
        }


        /* Sekcja Quizu i Opcje */
        .symbol-display {
            font-size: 80px;
            margin: 20px auto; 
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            padding: 10px;
            height: 100px; 
            display: flex;
            justify-content: center;
            align-items: center;
            color: #f1c40f; 
            width: 120px; 
        }
        .options button, .menu button {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: none;
            border-radius: 5px;
            background-color: #2980b9; 
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .options button:hover, .menu button:hover {
            background-color: #3498db;
        }

        /* Styl dla sekcji "O nas" */
        #aboutContent {
            text-align: left;
            padding-top: 15px;
        }
        #aboutContent p {
            line-height: 1.6;
            margin-bottom: 15px;
        }
        #aboutContent ul {
            list-style: disc;
            margin-left: 20px;
            padding-left: 0;
        }

        /* Style dla informacji zwrotnej i wyniku */
        .feedback {
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            min-height: 25px; 
        }
        .correct { color: #2ecc71; } 
        .incorrect { color: #e74c3c; } 
        .score { margin-top: 15px; font-size: 16px; }
        #quizContent { display: none; }
        #aboutContent { display: none; }
        #opinionsContent { display: none; }
    </style>
</head>
<body>

    <div class="quiz-container">
        
        <div class="main-nav">
            <button onclick="showSection('menu')">START</button>
            <button onclick="showSection('about')">O PROJEKCIE</button>
            <button onclick="showSection('opinions')">OPINIE</button>
        </div>

        <h1 id="mainTitle">Wybierz Kategoriƒô Quizu</h1>
        
        <img id="logoImage" class="logo" src="logo.png" alt="Logo" style="display: none;">
        
        <div id="menu">
            </div>
        
        <div id="aboutContent">
            <h2>‚ÑπÔ∏è Informacje o Projekcie Quizu</h2>
            <p>Witaj w naszym interaktywnym quizie opartym na rozpoznawaniu symboli! Projekt ten ma na celu po≈ÇƒÖczenie edukacji z zabawƒÖ, pozwalajƒÖc na szybkƒÖ naukƒô i testowanie wiedzy o flagach, ikonach i emotikonach.</p>

            <h3>üéØ Cel Projektu</h3>
            <ul>
                <li>Edukacja wizualna: Rozwijanie umiejƒôtno≈õci szybkiego rozpoznawania symboli.</li>
                <li>Rozrywka: Dostarczenie ciekawej i wciƒÖgajƒÖcej formy spƒôdzania czasu.</li>
                <li>Demonstracja technologii: Pokazanie, jak proste strony internetowe mogƒÖ byƒá w pe≈Çni interaktywne bez potrzeby korzystania z zewnƒôtrznych serwer√≥w.</li>
            </ul>

            <h3>üíª Technologie</h3>
            <p>Quiz zosta≈Ç zbudowany w ca≈Ço≈õci w jednym pliku `quiz.html`, u≈ºywajƒÖc trzech podstawowych technologii webowych:</p>
            <ul>
                <li>HTML (HyperText Markup Language): Struktura i uk≈Çad strony (np. tytu≈Çy, przyciski).</li>
                <li>CSS (Cascading Style Sheets): WyglƒÖd i styl (np. ciemne t≈Ço, kolor przycisk√≥w).</li>
                <li>JavaScript (JS): Logika i interaktywno≈õƒá (np. mieszanie pyta≈Ñ, sprawdzanie odpowiedzi, liczenie punkt√≥w i prze≈ÇƒÖczanie widok√≥w).</li>
            </ul>

            <h3>üßë‚Äçüíª Tw√≥rca</h3>
            <p>Zrobi≈Ç to mistrz programowania **Mniok Krzesiwo** z **10-letnim** do≈õwiadczeniem!</p>
        </div>

        <div id="opinionsContent">
            <h2>üí¨ Opinie U≈ºytkownik√≥w</h2>
            
            <div style="background-color: rgba(100, 100, 100, 0.3); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <h3>Podziel siƒô swojƒÖ opiniƒÖ</h3>
                <input type="text" id="opinionAuthor" placeholder="Twoje imiƒô" style="width: 100%; padding: 8px; margin: 10px 0; border: none; border-radius: 4px; box-sizing: border-box;">
                <textarea id="opinionText" placeholder="Wpisz swojƒÖ opiniƒô o quizie..." style="width: 100%; padding: 8px; margin: 10px 0; border: none; border-radius: 4px; box-sizing: border-box; min-height: 80px; font-family: Arial, sans-serif;"></textarea>
                <button onclick="addOpinion()" style="width: 100%; padding: 10px; background-color: #f1c40f; color: #2c3e50; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; font-size: 16px;">Wy≈õlij opiniƒô</button>
            </div>

            <div id="opinionsList" style="max-height: 400px; overflow-y: auto;">
                <!-- Opinie bƒôdƒÖ ≈Çadowane tutaj dynamicznie -->
            </div>
        </div>


        <div id="quizContent">
            <p>Jaki symbol reprezentuje:</p>
            <div id="questionText" style="font-size: 24px; font-weight: bold; margin-bottom: 20px;"></div>
            
            <div id="symbolDisplay" class="symbol-display">?</div>

            <div id="options" class="options">
                </div>

            <div id="feedback" class="feedback"></div>

            <div id="score" class="score">Wynik: 0 / 0</div>
        </div>
    </div>

    <script>
        // JavaScript: Logika zarzƒÖdzania sekcjami i quizem
        
        // --- BAZA PYTA≈É ---
        // Zachowujemy ma≈Çy zestaw dla poziomu "≈Åatwy"
        const allQuizData = {
            "Kraje (Flagi)": [
                { name: "Polska", symbol: "üáµüá±" },
                { name: "Niemcy", symbol: "üá©üá™" },
                { name: "W≈Çochy", symbol: "üáÆüáπ" },
                { name: "Hiszpania", symbol: "üá™üá∏" },
                { name: "Francja", symbol: "üá´üá∑" },
            ],
            "Zwierzƒôta (Emoji)": [
                { name: "Pies", symbol: "üê∂" },
                { name: "Kot", symbol: "üê±" },
                { name: "Lew", symbol: "ü¶Å" },
                { name: "≈ª√≥≈Çw", symbol: "üê¢" },
                { name: "Pszczo≈Ça", symbol: "üêù" },
            ],
            "Jedzenie i Picie": [
                { name: "Pizza", symbol: "üçï" },
                { name: "Kawa", symbol: "‚òï" },
                { name: "Hamburger", symbol: "üçî" },
                { name: "Lody", symbol: "üç¶" },
                { name: "Wino", symbol: "üç∑" },
            ]
        };
        // Dodatkowa pe≈Çna pula flag z oznaczeniem regionu (u≈ºywana dla ≈öredni/Trudny)
        const allFlags = [
            { name: "Polska", symbol: "üáµüá±", region: "Europe" },
            { name: "Niemcy", symbol: "üá©üá™", region: "Europe" },
            { name: "W≈Çochy", symbol: "üáÆüáπ", region: "Europe" },
            { name: "Hiszpania", symbol: "üá™üá∏", region: "Europe" },
            { name: "Francja", symbol: "üá´üá∑", region: "Europe" },
            { name: "Wielka Brytania", symbol: "üá¨üáß", region: "Europe" },
            { name: "Szwecja", symbol: "üá∏üá™", region: "Europe" },
            { name: "Norwegia", symbol: "üá≥üá¥", region: "Europe" },
            { name: "Holandia", symbol: "üá≥üá±", region: "Europe" },
            { name: "Portugalia", symbol: "üáµüáπ", region: "Europe" },
            { name: "Stany Zjednoczone", symbol: "üá∫üá∏", region: "Americas" },
            { name: "Kanada", symbol: "üá®üá¶", region: "Americas" },
            { name: "Brazylia", symbol: "üáßüá∑", region: "Americas" },
            { name: "Meksyk", symbol: "üá≤üáΩ", region: "Americas" },
            { name: "Argentyna", symbol: "üá¶üá∑", region: "Americas" },
            { name: "Japonia", symbol: "üáØüáµ", region: "Asia" },
            { name: "Chiny", symbol: "üá®üá≥", region: "Asia" },
            { name: "Indie", symbol: "üáÆüá≥", region: "Asia" },
            { name: "Australia", symbol: "üá¶üá∫", region: "Oceania" },
            { name: "Nowa Zelandia", symbol: "üá≥üáø", region: "Oceania" },
            { name: "RPA", symbol: "üáøüá¶", region: "Africa" },
            { name: "Egipt", symbol: "üá™üá¨", region: "Africa" },
            // ...mo≈ºesz dopisaƒá wiƒôcej pozycji je≈õli chcesz...
        ];
        // ------------------

        let currentQuizData = []; 
        let currentPool = [];
        let currentQuestionIndex = 0;
        let score = 0;
        // ZAMIANA: zamiast dynamicznie inkrementowaƒá totalQuestions przy ka≈ºdym pytaniu,
        // ustawiamy docelowƒÖ liczbƒô pyta≈Ñ przy starcie quizu (max 10).
        let totalQuestions = 0;      // docelowa liczba pyta≈Ñ w tej sesji (np. 10)
        let answeredCount = 0;      // ile pyta≈Ñ ju≈º odpowiedziano (u≈ºywane do progresu)
        let incorrectAnswers = [];  // zbieramy obiekty { name, selected, correct }
        let lastCategory = null;
        let lastDifficulty = null;

        // Elementy DOM
        const menuContainer = document.getElementById('menu');
        const quizContent = document.getElementById('quizContent');
        const aboutContent = document.getElementById('aboutContent');
        const mainTitle = document.getElementById('mainTitle');
        const questionTextElement = document.getElementById('questionText');
        const symbolDisplayElement = document.getElementById('symbolDisplay');
        const optionsContainer = document.getElementById('options');
        const feedbackElement = document.getElementById('feedback');
        const scoreElement = document.getElementById('score');

        // --- G≈Å√ìWNA FUNKCJA ZARZƒÑDZANIA WIDOKAMI ---
        function showSection(sectionId) {
            // Ukrywa wszystkie sekcje
            menuContainer.style.display = 'none';
            quizContent.style.display = 'none';
            aboutContent.style.display = 'none';
            document.getElementById('opinionsContent').style.display = 'none';
            
            // Pokazuje tylko wybranƒÖ sekcjƒô
            if (sectionId === 'menu') {
                showMenu();
                menuContainer.style.display = 'block';
            } else if (sectionId === 'about') {
                mainTitle.textContent = "Informacje o projekcie";
                aboutContent.style.display = 'block';
            } else if (sectionId === 'opinions') {
                mainTitle.textContent = "Opinie u≈ºytkownik√≥w";
                document.getElementById('opinionsContent').style.display = 'block';
                loadOpinions();
            }
        }
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- FUNKCJA WYSWIETLA MENU ---
        function showMenu() {
            mainTitle.textContent = "Wybierz Kategoriƒô Quizu";
            document.getElementById('logoImage').style.display = 'block';
            menuContainer.innerHTML = '';
            
            Object.keys(allQuizData).forEach(categoryName => {
                const button = document.createElement('button');
                button.textContent = categoryName;
                button.onclick = () => showDifficulty(categoryName); 
                menuContainer.appendChild(button);
            });
        }

        function showDifficulty(categoryName) {
            mainTitle.textContent = "Wybierz Poziom Trudno≈õci";
            menuContainer.innerHTML = '';

            const difficulties = ['≈Åatwy', '≈öredni', 'Trudny'];
            difficulties.forEach(difficulty => {
                const button = document.createElement('button');
                button.textContent = difficulty;
                button.onclick = () => startQuiz(categoryName, difficulty);
                menuContainer.appendChild(button);
            });
        }

        function startQuiz(categoryName, difficulty) {
            // zachowujemy referencjƒô ostatniej konfiguracji (do ewentualnego powt√≥rzenia)
            lastCategory = categoryName;
            lastDifficulty = difficulty;

            // Wyb√≥r puli pyta≈Ñ zale≈ºnie od kategorii i poziomu trudno≈õci
            if (categoryName === "Kraje (Flagi)") {
                if (difficulty === 'Trudny') {
                    currentPool = allFlags.slice(); // ca≈Çy ≈õwiat
                } else if (difficulty === '≈öredni') {
                    currentPool = allFlags.filter(f => f.region === 'Europe');
                } else {
                    currentPool = allQuizData["Kraje (Flagi)"].slice();
                }
                currentQuizData = currentPool.map(item => ({ name: item.name, symbol: item.symbol }));
            } else {
                currentQuizData = allQuizData[categoryName].slice();
                currentPool = currentQuizData.slice();
            }
            shuffleArray(currentQuizData);
            currentQuestionIndex = 0;
            score = 0;

            // Ustawiamy ile pyta≈Ñ bƒôdzie w tej sesji (max 10)
            totalQuestions = Math.min(10, currentQuizData.length);
            answeredCount = 0;
            incorrectAnswers = [];

            mainTitle.textContent = `${categoryName} - Poziom: ${difficulty}`;
            document.getElementById('logoImage').style.display = 'none';
            menuContainer.style.display = 'none'; 
            aboutContent.style.display = 'none';
            quizContent.style.display = 'block';
            
            loadQuestion();
        }

        function loadQuestion() {
            // Je≈ºeli osiƒÖgniƒôto zaplanowanƒÖ liczbƒô pyta≈Ñ -> poka≈º podsumowanie
            if (currentQuestionIndex >= totalQuestions) {
                // Podsumowanie wynik√≥w: tabela z odpowiedziami (wszystkie)
                questionTextElement.textContent = "Koniec Quizu!";
                symbolDisplayElement.textContent = "üéâ";

                let wrongCount = totalQuestions - score;
                let summaryHtml = `<div style="text-align:left;">
                    <p>Twoje wyniki: <strong>${score}</strong> poprawnych, <strong>${wrongCount}</strong> b≈Çƒôdnych (z ${totalQuestions}).</p>`;

                // Zbuduj pe≈ÇnƒÖ listƒô odpowiedzi u≈ºytkownika (poprawne i b≈Çƒôdne)
                let allAnswers = [];
                for (let i = 0; i < totalQuestions; i++) {
                    const q = currentQuizData[i];
                    // Szukamy czy by≈Ça b≈Çƒôdna odpowied≈∫ dla tego pytania
                    const wrong = incorrectAnswers.find(item => item.name === q.name);
                    if (wrong) {
                        allAnswers.push({
                            name: q.name,
                            selected: wrong.selected,
                            correct: q.symbol,
                            isCorrect: false
                        });
                    } else {
                        allAnswers.push({
                            name: q.name,
                            selected: q.symbol,
                            correct: q.symbol,
                            isCorrect: true
                        });
                    }
                }

                summaryHtml += `<table style="width:100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th style="border-bottom:1px solid #ccc; text-align:left; padding:6px;">Pytanie</th>
                            <th style="border-bottom:1px solid #ccc; text-align:left; padding:6px;">Twoja odpowied≈∫</th>
                            <th style="border-bottom:1px solid #ccc; text-align:left; padding:6px;">Poprawna odpowied≈∫</th>
                            <th style="border-bottom:1px solid #ccc; text-align:left; padding:6px;">Status</th>
                        </tr>
                    </thead>
                    <tbody>`;
                allAnswers.forEach(item => {
                    summaryHtml += `<tr>
                        <td style="padding:6px; border-top:1px solid #eee;">${item.name}</td>
                        <td style="padding:6px; border-top:1px solid #eee;">${item.selected}</td>
                        <td style="padding:6px; border-top:1px solid #eee;">${item.correct}</td>
                        <td style="padding:6px; border-top:1px solid #eee; color:${item.isCorrect ? '#2ecc71' : '#e74c3c'};">
                            ${item.isCorrect ? '‚úîÔ∏è' : '‚ùå'}
                        </td>
                    </tr>`;
                });
                summaryHtml += `</tbody></table>`;

                summaryHtml += `<div style="margin-top:12px;">
                    <button onclick="showSection('menu')" style="margin-right:8px;">Wr√≥ƒá do Menu</button>
                    <button onclick="startQuiz('${lastCategory}', '${lastDifficulty}')">Spr√≥buj ponownie tƒô samƒÖ kategoriƒô</button>
                </div>
                </div>`;

                optionsContainer.innerHTML = summaryHtml;
                feedbackElement.textContent = "";
                scoreElement.textContent = `Wynik: ${score} / ${totalQuestions}`;
                return;
            }

            const currentQuestion = currentQuizData[currentQuestionIndex];
            questionTextElement.textContent = currentQuestion.name;
            symbolDisplayElement.textContent = "?"; 
            optionsContainer.innerHTML = '';
            feedbackElement.textContent = '';
            
            // Zbieramy odpowiedzi z currentPool (dostosowanej puli)
            let options = [currentQuestion.symbol];
            let incorrectSymbols = [];
            currentPool.forEach(item => {
                if (item.symbol && item.symbol !== currentQuestion.symbol) {
                    incorrectSymbols.push(item.symbol);
                }
            });
            shuffleArray(incorrectSymbols);
            options = options.concat(incorrectSymbols.slice(0, Math.min(3, incorrectSymbols.length)));
            shuffleArray(options); 

            options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                // Przekazujemy te≈º nazwƒô pytania, aby m√≥c zapisaƒá b≈Çƒôdy
                button.onclick = () => checkAnswer(button, option, currentQuestion.symbol, currentQuestion.name);
                optionsContainer.appendChild(button);
            });
        }
        
        function checkAnswer(clickedButton, selectedSymbol, correctAnswerSymbol, questionName) {
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = true;
            });
            
            symbolDisplayElement.textContent = correctAnswerSymbol; 

            if (selectedSymbol === correctAnswerSymbol) {
                feedbackElement.textContent = "‚úÖ Dobrze!";
                feedbackElement.className = "feedback correct";
                clickedButton.style.backgroundColor = "#2ecc71"; 
                score++;
            } else {
                feedbackElement.textContent = "‚ùå ≈πle! Poprawny to " + correctAnswerSymbol;
                feedbackElement.className = "feedback incorrect";
                clickedButton.style.backgroundColor = "#e74c3c"; 
                Array.from(optionsContainer.children).forEach(button => {
                    if (button.textContent === correctAnswerSymbol) {
                        button.style.backgroundColor = "#2ecc71";
                    }
                });
                // Zapisujemy b≈ÇƒÖd wraz z nazwƒÖ pytania i odpowiedziami
                incorrectAnswers.push({
                    name: questionName,
                    selected: selectedSymbol,
                    correct: correctAnswerSymbol
                });
            }

            answeredCount++;
            // Poka≈º postƒôp: ile poprawnych na ile docelowych
            scoreElement.textContent = `Wynik: ${score} / ${totalQuestions}`;

            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
            }, 1200);
        }

        // --- OPINIE ---

        function loadOpinions() {
            const opinionsList = document.getElementById('opinionsList');
            const opinions = JSON.parse(localStorage.getItem('quizOpinions')) || [];
            
            if (opinions.length === 0) {
                opinionsList.innerHTML = '<p style="text-align: center; color: #bdc3c7;">Brak opinii. BƒÖd≈∫ pierwszy!</p>';
                return;
            }

            opinionsList.innerHTML = '';
            opinions.reverse().forEach((opinion, index) => {
                const opinionDiv = document.createElement('div');
                opinionDiv.style.cssText = 'background-color: rgba(100, 100, 100, 0.2); padding: 12px; margin: 10px 0; border-radius: 6px; border-left: 3px solid #f1c40f;';
                opinionDiv.innerHTML = `
                    <p style="margin: 0 0 5px 0; font-weight: bold; color: #f1c40f;">${opinion.author || 'Anonimowy'}</p>
                    <p style="margin: 0; color: #ecf0f1;">${opinion.text}</p>
                    <small style="color: #bdc3c7;">${opinion.date}</small>
                `;
                opinionsList.appendChild(opinionDiv);
            });
        }

        function addOpinion() {
            const author = document.getElementById('opinionAuthor').value.trim();
            const text = document.getElementById('opinionText').value.trim();

            if (text === '') {
                alert('Proszƒô wpisaƒá opiniƒô!');
                return;
            }

            const opinions = JSON.parse(localStorage.getItem('quizOpinions')) || [];
            const now = new Date();
            const dateStr = now.toLocaleDateString('pl-PL') + ' ' + now.toLocaleTimeString('pl-PL', { hour: '2-digit', minute: '2-digit' });

            opinions.push({
                author: author || 'Anonimowy',
                text: text,
                date: dateStr
            });

            localStorage.setItem('quizOpinions', JSON.stringify(opinions));
            
            document.getElementById('opinionAuthor').value = '';
            document.getElementById('opinionText').value = '';
            
            loadOpinions();
            alert('Dziƒôkujemy za opiniƒô!');
        }

        // Uruchomienie menu przy ≈Çadowaniu strony
        window.onload = () => showSection('menu');
    </script>

</body>
</html>
